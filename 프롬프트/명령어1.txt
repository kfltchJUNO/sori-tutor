아래 내용 반영해서 축약과 생략 없는 전체 코드 제시해.

현재 오류 내용
1) 지금 녹음 버튼이 다 사라졌어. 예전처럼 피드백이 길어질 것을 대비해 하단에 녹음 버튼이 위치하면서 피드백 이후 터치도 가능하도록 설정해.
2) 자유회화에 들어가면 AI가 바로 대화시작(음성과 텍스트)하도록 해야 되는데 텍스트는 보이지만 아무 말도 안 하고 있어. 다시 기능 원래대로 복원해.

토큰 차감 시스템, 관리자 페이지 토큰 관련
1) 단어 피드백: 토큰 0.5개 차감
2) 문장, 담화 피드백: 토큰 1개 차감
3) 자유회화: 대화당 토큰 2개 차감, 최종 피드백시 토큰 2개 추가 차감.
4) 관리자가 토큰을 지급하는 것 뿐만 아니라 -를 붙여 차감도 가능하게 해줘.
5) 7일 연속 학습 챌린지를 완료하면 완료한 다음날 자정에 자동으로 토큰 지급되게 해주고 메세지함에 축하 메세지를 보내줘.

유저 주간 랭킹 집계 방법
1) 단어 피드백 1회당 2포인트
2) 문장, 담화 피드백 1회당 3포인트
3) 자유회화 종합 피드백 1회당 10포인트 (단순 대화는 집계 안 함)
4) 연속 접속 후 5번 이상 피드백 받으면 하루에 10포인트씩 추가

자유회화 AI 인기 랭킹 집계 및 AI 선택창 표기
1) 피드백 횟수가 아닌 사용자가 대화를 시도한 횟수를 합산해서 매일 자정에 갱신
2) 인기 TOP3 AI는 선택창에서 인기 1위, 인기 2위, 인기 3위 뱃지를 표출

자유회화 AI 페르소나 및 음성 고정
1) 괄호 안의 음성으로 고정시켜줘. (절대 수정 금지)
1. 친근한 대학생 | 수경 (ko-KR-Chirp3-HD-Zephyr) 
2. 다정한 카페 사장님 | 민철 (ko-KR-Chirp3-HD-Rasalgethi)
3. 깐깐한 면접관 | 진성 (ko-KR-Chirp3-HD-Algenib)
4. K-Culture 팬 | 설아 (ko-KR-Chirp3-HD-Despina)
5. 동네 헬스 트레이너 | 도식 (ko-KR-Chirp3-HD-Achird)
6. 여행 가이드 | 주호 (ko-KR-Chirp3-HD-Achernar)
7. 고민 상담사 | 혜선 (ko-KR-Chirp3-HD-Aoede)
8. 개구쟁이 중학생 | 우주 (ko-KR-Chirp3-HD-Charon)
9. 소설가 | 현성 (ko-KR-Chirp3-HD-Zubenelgenubi)
10. 시장통 국밥집 할머니 | 순자 할머니 (ko-KR-Chirp3-HD-Vindemiatrix)

아래 내용은 질문에 답변만 해줘. (코드 반영X)
1) 가격을 낮췄음에도 부담스러운 사람을 위해 광고 시청 후 토큰을 1~3개 랜덤으로 지급하는 시스템 반영이 가능한지?
2) 자유회화 AI가 사용자의 응답을 기억하고 다음에 그 내용을 바탕으로 대화하게 하면 데이터베이스에 무리가 가려나? 일단 그 시스템 구현은 가능해?